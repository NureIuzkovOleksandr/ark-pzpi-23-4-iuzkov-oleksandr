Харківський національний університет радіоелектроніки
Факультет комп’ютерних наук
Катедра програмної інженерії


Звіт
з практичної роботи № 1
з дисципліни «Аналіз та рефакторинг коду»
на тему «Правила оформлення програмного коду на R»




    Виконав:                                                                           Перевірив:
ст. гр. ПЗПІ-23-4                                                              ст. викладач кафедри ПІ
Юзков Олександр                                            	         Сокорчук Ігор Петрович



Харків 2025
1 ІСТОРІЯ ЗМІН

№ДатаВерсія звітуОпис змін та виправлень122.11.20250.1Зроблено звіт
2 ЗАВДАННЯ
     Метою роботи є ознайомлення з базовими правилами написання чистого, структурованого та підтримуваного коду. Необхідно дослідити стильові рекомендації, правила іменування, формати структур даних, принципи оформлення функцій, коментування та рефакторингу. Для кожної рекомендації треба навести приклади правильної та неправильної реалізації й детально обґрунтувати її важливість.
3 ОПИС ВИКОНАНОЇ РОБОТИ
     У межах роботи було обрано мову програмування R, яка використовується для аналізу даних, статистики та побудови моделей. Під час дослідження проаналізовано основні стилістичні стандарти tidyverse, рекомендації R-спільноти та практики написання чистого коду. На основі вивченого матеріалу підготовлено приклади правильного оформлення змінних, функцій, колекцій, структур, коментарів та стилю форматування.
Рекомендація 1: Використовуйте осмислені назви змінних у стилі snake_case
Опис: Назви змінних повинні чітко відображати їх зміст. Це полегшує читання коду, його підтримку та налагодження. Використовуйте зрозумілі назви, уникаючи абстрактних літер або змішаних стилів.
Приклад:
5. # Погано
6. x <- 10
7. df1 <- data.frame()
8. 
9. # Добре
10. customer_count <- 10
11. sales_data <- data.frame()
Пояснення: Зміни snake_case дозволяють одразу визначити, що це змінні, а зрозумілі імена спрощують роботу над кодом, особливо в команді або при великих проектах.
Рекомендація 2: Використовуйте осмислені назви функцій (дієслівні)
Опис: Функції виконують дію, тому їх назви повинні бути дієсловами або дієслівними словосполученнями, що описують результат.
Приклад:
27. # Погано
28. data_process <- function(x) { ... }
29. 
30. # Добре
31. clean_sales_data <- function(raw_data) { ... }
Пояснення: Назви функцій мають відображати дію. Це допомагає зрозуміти, що робить функція без необхідності заглиблюватися в її код.
Рекомендація 3: Використовуйте PascalCase для класів (R6, S3, S4)
Опис: Класи повинні відрізнятися від змінних і функцій за стилем. PascalCase дозволяє легко ідентифікувати об’єктно-орієнтовані структури.
Приклад:
31. # Погано
32. employee <- R6Class("employee", public = list(name = NULL))
33. 
34. # Добре
35. Employee <- R6Class("Employee", public = list(name = NULL))

Пояснення: Таке оформлення підвищує читабельність та зрозумілість структури коду, особливо при роботі з кількома класами та їх методами.
Рекомендація 4: Вертикальне форматування пайпів і логічне структурування коду
Опис: Для читабельності та підтримки коду розбивайте складні операції на кілька рядків, використовуючи вертикальне форматування пайпів.
Приклад:
36. # Погано
37. result <- data %>% filter(age > 18) %>% group_by(city) %>% summarise(mean_income = mean(income))
38. 
39. # Добре
40. result <- data %>%
41.   filter(age > 18) %>%
42.   group_by(city) %>%
43.   summarise(mean_income = mean(income))	

Пояснення: Вертикальне форматування робить кроки обробки даних зрозумілими, дозволяє швидко додавати нові операції і полегшує налагодження.

Рекомендація 5: Використовуйте векторизацію для оптимізації продуктивності
Опис: R оптимізований для роботи з векторами. Використовуйте векторизовані функції замість циклів там, де це можливо.
Приклад:
65.  # Погано
66. squared <- numeric(length(x))
67. for (i in seq_along(x)) {
68.   squared[i] <- x[i]^2
69. }
70. 
71. # Добре
72. squared <- x^2
Пояснення: Векторизація скорочує код, підвищує продуктивність і зменшує ризик помилок у циклах.
Рекомендація 6: Обробка помилок через tryCatch()
Опис: Необхідно передбачати можливі помилки у виконанні коду і обробляти їх, щоб уникнути аварійного завершення.
Приклад:
83. # Погано
84. data <- read.csv("file.csv")
85. 
86. # Добре
87. data <- tryCatch(
88.   read.csv("file.csv"),
89.   error = function(e) {
90.     message("Файл не знайдено: ", e$message)
91.     NULL
92.   }
93. )

Пояснення: Це дозволяє контролювати помилки, логувати їх та продовжувати виконання коду без зупинки скрипта.
Рекомендація 7: Дотримання парадигм програмування (функціональна та ООП)
Опис: R підтримує функціональний та об’єктно-орієнтований стилі. Функції повинні бути чистими (без побічних ефектів), а класи — структурованими з методами та властивостями.
Приклад:
94. # Погано
95. employee <- list(name="Bob", salary=1000)
96. 
97. # Добре
98. Employee <- R6::R6Class("Employee",
99.   public = list(
100.     name = NULL,
101.     salary = NULL,
102.     initialize = function(name, salary) {
103.       self$name <- name
104.       self$salary <- salary
105.     },
106.     give_raise = function(amount) {
107.       self$salary <- self$salary + amount
108.     }
109.   )
110. )

Пояснення: Чітка структура класів та методів підвищує підтримуваність та масштабованість проектів.
Рекомендація 8: Тестування коду
Опис: Код має бути протестований через автоматизовані тести. Для R використовуйте testthat.
Приклад:
112. # Погано
113. calculate_total <- function(x, y) { x + y }
114. 
115. # Добре
116. library(testthat)
117. 
118. test_that("calculate_total додає числа правильно", {
119.   expect_equal(calculate_total(2,3), 5)
120.   expect_equal(calculate_total(0,0), 0)
121. })

Пояснення: Автоматизовані тести дозволяють перевірити правильність функцій, уникнути регресій та забезпечують надійність коду.


Рекомендація 9: Документування коду через roxygen2
Опис: Використання документації робить код самодокументованим і зрозумілим для інших розробників.
Приклад:
125. # Погано
126. calculate_total <- function(x, y) { x + y }
127. 
128. # Добре
129. #' Обчислює суму двох чисел
130. #'
131. #' @param x перше число
132. #' @param y друге число
133. #' @return сума x та y
134. calculate_total <- function(x, y) {
135.   x + y
136. }

Пояснення: Документація через roxygen2 дозволяє генерувати man-файли, підвищує зрозумілість та підтримуваність коду.










4 ВИСНОВКИ
     У результаті виконання роботи було поглиблено знання щодо принципів написання чистого, ефективного та підтримуваного коду на мові програмування R. Проаналізовано основні рекомендації з організації коду, дотримання стильових стандартів tidyverse та R-спільноти, правильного найменування змінних, функцій і класів, а також методів рефакторингу для підвищення читабельності та зручності супроводу скриптів. На практичних прикладах продемонстровано, як застосування цих принципів сприяє створенню структурованого та зрозумілого коду для аналізу даних, статистичних розрахунків та побудови моделей. Отже, отримані результати підтвердили важливість дотримання правил чистого коду для підвищення якості, надійності та довговічності програмних продуктів, розроблених на мові R.
5 ВИКОРИСТАНІ ДЖЕРЕЛА



















ДОДАТОК А
Відеозапис
Відеозапис презентації результатів лабораторної роботи: 
https://youtu.be/xssBWfNQh4E
Хронологічний опис відеозапису:
00:00 - Вступ 
00:10 - Зміст 
00:12 - Про R 
00:30 – Правила в R 
01:04 - Правила іменування змінних
02:00 - Правила іменування функцій
03:10 – Вертикальне форматування
03:43 – Обробка помилок 
04:07 – Дотримання парадигм 
04:34 – Автоматичне тестування 
05:08 – Документація через roxygen2
05:32 - Висновок







ДОДАТОК Б
Слайди презентації

Рисунок Б.1 - Титульний лист

Рисунок Б.2 - Зміст

Рисунок Б.3 – Про R


Рисунок Б.4 – Чому важливо дотримуватися правил оформлення коду


Рисунок Б.5 – Використання зрозумілих назв змінних


Рисунок Б.6 – Назви функцій



Рисунок Б.7 – Назви класів


Рисунок Б.8 – Вертикальне форматування


Рисунок Б.9 – Обробка помилок


Рисунок Б.10 – Дотримання парадігм


Рисунок Б.11 – Тестування


Рисунок Б.12 – Документування


Рисунок Б.13 – Висновки













ДОДАТОК В
Програмний код
GitHub репозиторій: https://github.com/NureIuzkovOleksandr/ark-pzpi-23-4-iuzkov-oleksandr/blob/main/Pract1/pzpi-23-4-iuzkov-oleksandr-pract1/code-examples-refactoring-methods.R
1. # Погано
2. x <- 10
3. df1 <- data.frame()
4. 
5. # Добре
6. customer_count <- 10
7. sales_data <- data.frame()
8. 
9. # Погано
10. data_process <- function(x) { ... }
11. 
12. # Добре
13. clean_sales_data <- function(raw_data) { ... }
14. 
15. # Погано
16. employee <- R6Class("employee", public = list(name = NULL))
17. 
18. # Добре
19. Employee <- R6Class("Employee", public = list(name = NULL))
20. 
21. # Погано
22. result <- data %>% filter(age > 18) %>% group_by(city) %>% summarise(mean_income = mean(income))
23. 
24. # Добре
25. result <- data %>%
26.   filter(age > 18) %>%
27.   group_by(city) %>%
28.   summarise(mean_income = mean(income))
29. 
30. # Погано
31. data <- read.csv("file.csv")
32. 
33. # Добре
34. data <- tryCatch(
35.   read.csv("file.csv"),
36.   error = function(e) {
37.     message("Файл не знайдено: ", e$message)
38.     NULL
39.   }
40. )
41. 
42. # Погано
43. employee <- list(name="Bob", salary=1000)
44. 
45. # Добре
46. Employee <- R6::R6Class("Employee",
47.   public = list(
48.     name = NULL,
49.     salary = NULL,
50.     initialize = function(name, salary) {
51.       self$name <- name
52.       self$salary <- salary
53.     },
54.     give_raise = function(amount) {
55.       self$salary <- self$salary + amount
56.     }
57.   )
58. )
59. 
60. library(testthat)
61. 
62. test_that("calculate_total додає числа правильно", {
63.   expect_equal(calculate_total(2,3), 5)
64.   expect_equal(calculate_total(0,0), 0)
65. })
66. 
67. #' Обчислює суму двох чисел
68. #'
69. #' @param x перше число
70. #' @param y друге число
71. #' @return сума x та y
72. calculate_total <- function(x, y) {
73.   x + y
74. }


2










